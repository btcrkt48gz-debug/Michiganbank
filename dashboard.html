<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CredCrypt Bank - Dashboard</title>
<style>
:root {
  --bg:#f0f2f5;
  --card:#ffffffcc;
  --text:#111;
  --muted:#555;
  --accent:#0b74ff;
}
[data-theme="dark"] {
  --bg:#0b1120;
  --card:#1c1f2bcc;
  --text:#eef6ff;
  --muted:#aaa;
  --accent:#2ea6ff;
}
body {
  margin:0;
  font-family:Inter,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.container {
  max-width:1100px;
  margin:20px auto;
  padding:16px;
}
.card {
  background:var(--card);
  padding:16px;
  border-radius:16px;
  box-shadow:0 8px 24px rgba(0,0,0,0.08);
  margin-bottom:16px;
}
.header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:16px;
}
.btn {
  background:var(--accent);
  color:#fff;
  border:none;
  padding:12px 16px;
  border-radius:12px;
  cursor:pointer;
  font-weight:600;
  transition:0.2s;
}
.btn:hover {opacity:0.9;}
.grid4 {
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
}
.menu {
  position:fixed;
  top:0;
  left:-260px;
  width:260px;
  height:100%;
  background:var(--card);
  box-shadow:2px 0 12px rgba(0,0,0,0.2);
  padding:16px;
  transition:0.3s;
  z-index:1000;
}
.menu.open {left:0;}
.menu button {display:block;width:100%;margin-bottom:12px;}
.menu-toggle {cursor:pointer;font-weight:700;}
.muted-text{color:var(--muted);}
</style>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyAjy5sgZPMFsklKkSOMyC1HCvQ4-qNKP-M",
  authDomain: "fir-bank-c659f.firebaseapp.com",
  projectId: "fir-bank-c659f",
  storageBucket: "fir-bank-c659f.firebasestorage.app",
  messagingSenderId: "847611883266",
  appId: "1:847611883266:web:651ecee5dfea8e0f1cdc1b",
  measurementId: "G-QK7R83FC51"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
function fmtAmt(n){ n=Number(n)||0; return n.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2}); }
</script>
</head>
<body>
<div class="container">
  <div class="card header">
    <div>
      <span class="menu-toggle" onclick="toggleMenu()">☰ Menu</span>
      <h2>CredCrypt Bank</h2>
      <div id="greeting" class="muted-text">Welcome</div>
    </div>
    <div>
      <button id="themeToggle" class="btn">Toggle Theme</button>
      <button id="logoutBtn" class="btn">Logout</button>
    </div>
  </div>

  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div id="timeStr">--</div>
        <div style="font-size:28px;font-weight:700" id="mainBalance">₦0.00</div>
        <div class="muted-text">Combined Balance</div>
      </div>
      <div style="text-align:right">
        <div class="muted-text">Checking</div>
        <div style="font-weight:700" id="checkingAmt">₦0.00</div>
        <div style="height:8px"></div>
        <div class="muted-text">Savings</div>
        <div style="font-weight:700" id="savingsAmt">₦0.00</div>
      </div>
    </div>
  </div>

  <div class="card grid4">
    <button onclick="location.href='send.html'" class="btn">Bank Transfer</button>
    <button onclick="location.href='wire.html'" class="btn">Wire Transfer</button>
    <button class="btn">Withdraw</button>
    <button class="btn">Top Up</button>
    <button class="btn">Pay Bills</button>
    <button class="btn">Credit Score</button>
    <button class="btn">Loan</button>
    <button onclick="location.href='cards.html'" class="btn">Cards</button>
  </div>

  <div class="card">
    <button onclick="location.href='more.html'" class="btn">More</button>
  </div>
</div>

<!-- Hamburger Menu -->
<div id="menu" class="menu">
  <button onclick="location.href='settings.html'">Settings</button>
  <button onclick="location.href='security.html'">Security</button>
  <button onclick="location.href='userinfo.html'">User Info</button>
  <button onclick="location.href='cards.html'">Bank Cards & Accounts</button>
  <button onclick="logout()">Logout</button>
</div>

<script>
function toggleMenu(){document.getElementById('menu').classList.toggle('open');}
function logout(){auth.signOut();window.location.href='index.html';}
function tick(){document.getElementById('timeStr').textContent=new Date().toLocaleString();}
setInterval(tick,1000); tick();
auth.onAuthStateChanged(user=>{
  if(!user) return window.location.href='index.html';
  db.collection('users').doc(user.uid).onSnapshot(doc=>{
    if(!doc.exists) return;
    const data = doc.data();
    document.getElementById('greeting').textContent = "Good day, "+(data.firstName||user.email);
    const checking = Number((data.accounts && data.accounts.checking) || 0);
    const savings = Number((data.accounts && data.accounts.savings) || 0);
    document.getElementById('checkingAmt').textContent = '₦'+fmtAmt(checking);
    document.getElementById('savingsAmt').textContent = '₦'+fmtAmt(savings);
    document.getElementById('mainBalance').textContent = '₦'+fmtAmt(checking+savings);
  });
});
document.getElementById('themeToggle').addEventListener('click',()=>{
  const theme=document.documentElement.getAttribute('data-theme');
  if(theme==='dark') document.documentElement.setAttribute('data-theme','');
  else document.documentElement.setAttribute('data-theme','dark');
});
</script>
</body>
</html>