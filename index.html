<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Professional Demo Bank</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body{background-color:#f4f6f8;font-family:'Segoe UI',sans-serif;}
.navbar-brand{font-weight:bold;}
.container{max-width:960px;}
.card{margin:10px;}
.btn{margin:5px;}
.section{display:none; transition: all 0.3s ease;}
.section.active{display:block;}
.spinner{display:flex;justify-content:center;align-items:center;height:100px;}
.spinner div{width:50px;height:50px;margin:10px;border:5px solid #007bff;border-top:5px solid transparent;border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.modal-header{border-bottom:none;}
.success-banner{background:#d4edda;color:#155724;padding:15px;margin:15px 0;border-radius:5px;border:1px solid #c3e6cb;}
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Demo Bank</a>
    <div class="navbar-nav">
      <a class="nav-link" href="#" onclick="showSection('dashboard')">Dashboard</a>
      <a class="nav-link" href="#" onclick="showSection('transfer')">Transfer</a>
      <a class="nav-link" href="#" onclick="showSection('withdraw')">Withdraw</a>
      <a class="nav-link" href="#" onclick="showSection('wire')">Wire</a>
      <a class="nav-link" href="#" onclick="showSection('transactions')">Transactions</a>
      <a class="nav-link" href="#" onclick="showSection('account')">Account</a>
    </div>
  </div>
</nav>

<div class="container mt-4">

<!-- Dashboard -->
<div id="dashboard" class="section active">
<h2>Dashboard</h2>
<div id="accounts" class="row"></div>
</div>

<!-- Transfer -->
<div id="transfer" class="section">
<h2>Internal Transfer</h2>
<form id="transferForm">
<div class="mb-3"><label>From Account</label><select id="fromAccount" class="form-select"></select></div>
<div class="mb-3"><label>To Account</label><select id="toAccount" class="form-select"></select></div>
<div class="mb-3"><label>Amount</label><input type="number" id="transferAmount" class="form-control" required></div>
<button type="submit" class="btn btn-primary">Continue</button>
</form>
<div id="transferSuccess" class="success-banner" style="display:none;">Transfer completed successfully!</div>
</div>

<!-- Withdraw -->
<div id="withdraw" class="section">
<h2>Withdraw</h2>
<form id="withdrawForm">
<div class="mb-3"><label>From Account</label><select id="withdrawAccount" class="form-select"></select></div>
<div class="mb-3"><label>Amount</label><input type="number" id="withdrawAmount" class="form-control" required></div>
<button type="submit" class="btn btn-primary">Continue</button>
</form>
<div id="withdrawSuccess" class="success-banner" style="display:none;">Withdrawal completed successfully!</div>
</div>

<!-- Wire -->
<div id="wire" class="section">
<h2>Wire Transfer</h2>
<form id="wireForm">
<div class="mb-3"><label>From Account</label><select id="wireFrom" class="form-select"></select></div>
<div class="mb-3"><label>Bank / To</label><input type="text" id="wireTo" class="form-control" required></div>
<div class="mb-3"><label>Amount</label><input type="number" id="wireAmount" class="form-control" required></div>
<button type="submit" class="btn btn-primary">Continue</button>
</form>
<div id="wireSuccess" class="success-banner" style="display:none;">Wire transfer completed successfully!</div>
</div>

<!-- Transactions -->
<div id="transactions" class="section">
<h2>Transaction History</h2>
<table class="table table-striped">
<thead><tr><th>ID</th><th>Type</th><th>From</th><th>To</th><th>Amount</th><th>Date</th></tr></thead>
<tbody id="transactionTable"></tbody>
</table>
</div>

<!-- Account Management -->
<div id="account" class="section">
<h2>Account Management</h2>
<p>Manage your demo accounts here.</p>
</div>

<!-- Modal -->
<div class="modal fade" id="actionModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-3" id="modalContent"></div>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Demo Bank Logic
const accountsKey='demoBankAccounts';
const transactionsKey='demoBankTransactions';
let modalInstance;

function loadAccounts(){ return JSON.parse(localStorage.getItem(accountsKey)||'[]'); }
function saveAccounts(accounts){ localStorage.setItem(accountsKey,JSON.stringify(accounts)); }
function loadTransactions(){ return JSON.parse(localStorage.getItem(transactionsKey)||'[]'); }
function saveTransactions(transactions){ localStorage.setItem(transactionsKey,JSON.stringify(transactions)); }
function addAccount(name,balance){ const accounts=loadAccounts(); const acc={id:crypto.randomUUID(),name,balance}; accounts.push(acc); saveAccounts(accounts); return acc; }
function addTransaction(type,amount,from,to){ const txs=loadTransactions(); const tx={id:crypto.randomUUID(),type,amount,from,to,date:new Date().toLocaleString()}; txs.push(tx); saveTransactions(txs); return tx; }

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  hideSuccessBanners();
  if(id==='dashboard'){ renderAccounts(); }
  if(id==='transactions'){ renderTransactions(); }
  if(id==='transfer'){ populateTransfer(); }
  if(id==='withdraw'){ populateWithdraw(); }
  if(id==='wire'){ populateWire(); }
}

function hideSuccessBanners(){
  document.getElementById('transferSuccess').style.display='none';
  document.getElementById('withdrawSuccess').style.display='none';
  document.getElementById('wireSuccess').style.display='none';
}

function renderAccounts(){
  const div=document.getElementById('accounts'); div.innerHTML='';
  loadAccounts().forEach(a=>{
    const card=document.createElement('div');
    card.className='col-md-4';
    card.innerHTML=`<div class="card p-3"><h5>${a.name}</h5><p>Balance: $${a.balance.toFixed(2)}</p></div>`;
    div.appendChild(card);
  });
}

function renderTransactions(){
  const tbody=document.getElementById('transactionTable'); tbody.innerHTML='';
  loadTransactions().forEach(t=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${t.id}</td><td>${t.type}</td><td>${t.from}</td><td>${t.to}</td><td>$${t.amount}</td><td>${t.date}</td>`;
    tbody.appendChild(tr);
  });
}

function populateTransfer(){
  const fromSel=document.getElementById('fromAccount');
  const toSel=document.getElementById('toAccount');
  fromSel.innerHTML=''; toSel.innerHTML='';
  loadAccounts().forEach(a=>{
    fromSel.innerHTML+=`<option value="${a.id}">${a.name}</option>`;
    toSel.innerHTML+=`<option value="${a.id}">${a.name}</option>`;
  });
}

function populateWithdraw(){
  const sel=document.getElementById('withdrawAccount'); sel.innerHTML='';
  loadAccounts().forEach(a=>{ sel.innerHTML+=`<option value="${a.id}">${a.name}</option>`; });
}

function populateWire(){
  const sel=document.getElementById('wireFrom'); sel.innerHTML='';
  loadAccounts().forEach(a=>{ sel.innerHTML+=`<option value="${a.id}">${a.name}</option>`; });
}

// Initial demo accounts
if(loadAccounts().length===0){ addAccount('Checking',5000); addAccount('Savings',2000); }

function showModal(title,body,confirmCallback){
  const modalContent=document.getElementById('modalContent');
  modalContent.innerHTML=`
    <h5>${title}</h5>
    <p>${body}</p>
    <div class="text-center mt-3">
      <button class="btn btn-success" id="confirmBtn">Confirm</button>
      <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
    </div>
  `;
  if(!modalInstance) modalInstance=new bootstrap.Modal(document.getElementById('actionModal'));
  modalInstance.show();
  document.getElementById('confirmBtn').onclick=()=>{
    modalInstance.hide();
    showLoading(confirmCallback);
  };
}

function showLoading(callback){
  const modalContent=document.getElementById('modalContent');
  modalContent.innerHTML=`<h5>Processing...</h5><div class="spinner"><div></div></div>`;
  modalInstance.show();
  setTimeout(()=>{ modalInstance.hide(); callback(); },2000);
}

// Transfer
document.getElementById('transferForm')?.addEventListener('submit',e=>{
  e.preventDefault();
  const fromId=document.getElementById('fromAccount').value;
  const toId=document.getElementById('toAccount').value;
  const amount=parseFloat(document.getElementById('transferAmount').value);
  const fromAcc=loadAccounts().find(a=>a.id===fromId);
  const toAcc=loadAccounts().find(a=>a.id===toId);
  if(fromAcc.id===toAcc.id){ alert('Cannot transfer to same account'); return; }
  if(amount>fromAcc.balance){ alert('Insufficient balance'); return; }
  showModal('Confirm Transfer',`Transfer $${amount.toFixed(2)} from ${fromAcc.name} to ${toAcc.name}?`,()=>{
    fromAcc.balance-=amount; toAcc.balance+=amount;
    saveAccounts(loadAccounts());
    addTransaction('Transfer',amount,fromAcc.name,toAcc.name);
    document.getElementById('transferSuccess').style.display='block';
    showSection('dashboard');
  });
});

// Withdraw
document.getElementById('withdrawForm')?.addEventListener('submit',e=>{
  e.preventDefault();
  const accId=document.getElementById('withdrawAccount').value;
  const amount=parseFloat(document.getElementById('withdrawAmount').value);
  const acc=loadAccounts().find(a=>a.id===accId);
  if(amount>acc.balance){ alert('Insufficient balance'); return; }
  showModal('Confirm Withdraw',`Withdraw $${amount.toFixed(2)} from ${acc.name}?`,()=>{
    acc.balance-=amount; saveAccounts(loadAccounts());
    addTransaction('Withdraw',amount,acc.name,'Cash/Bank');
    document.getElementById('withdrawSuccess').style.display='block';
    showSection('dashboard');
  });
});

// Wire
document.getElementById('wireForm')?.addEventListener('submit',e=>{
  e.preventDefault();
  const fromId=document.getElementById('wireFrom').value;
  const toBank=document.getElementById('wireTo').value;
  const amount=parseFloat(document.getElementById('wireAmount').value);
  const acc=loadAccounts().find(a=>a.id===fromId);
  if(amount>acc.balance){ alert('Insufficient balance'); return; }
  showModal('Confirm Wire',`Send $${amount.toFixed(2)} from ${acc.name} to ${toBank}?`,()=>{
    acc.balance-=amount; saveAccounts(loadAccounts());
    addTransaction('Wire',amount,acc.name,toBank);
    document.getElementById('wireSuccess').style.display='block';
    showSection('dashboard');
  });
});
</script>
</body>
</html>